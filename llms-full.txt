# AutoArchitect Full Documentation Context
> This file is automatically generated. Do not edit directly.
> Generated on: 2026-01-09T11:38:59Z

## File: docs/DOC_POLICY.md
# Documentation Governance Policy (DOC_POLICY)

## 1. Scope and Purpose
This policy governs the creation, modification, and verification of all documentation within this repository. It ensures that documentation remains a reliable "Source of Truth" for both human operators and Documentation Authority Agents (DAA).

### Required Documentation Set
The following files are mandatory and must be maintained:
- `llms.txt`: Entry point for LLM-based discovery.
- `docs/DOC_POLICY.md`: This governance policy.
- `docs/SECURITY.md`: Security posture and threat model.
- `docs/ARCHITECTURE.md`: High-level system design and data flow.
- `docs/FRAMEWORK.md`: Implementation stack and boundaries.
- `docs/CHANGELOG.md`: Versioned history of significant changes.
- `docs/AGENTS_DOCUMENTATION_AUTHORITY.md`: System prompt for documentation agents.

## 2. Authority Model
- **Human Authority**: Ultimate approval for all changes.
- **Documentation Authority Agent (DAA)**: Authorized to perform incremental updates to the documentation set, provided they adhere to the provenance rules.

## 3. Provenance and Evidence Rules
Every new or modified documentation section must include a provenance footer:
- **Source**: {code | config | git | standard}
- **Locator**: {file paths | commit SHAs | URL}
- **Confidence**: {HIGH | MEDIUM | LOW}
- **Last Verified**: YYYY-MM-DD

### Fail-Closed Condition
If information cannot be verified through direct evidence (Source/Locator), it must be marked:
> **Status**: UNKNOWN  
> **Action Required**: Human Review  
> **Confidence**: LOW  

If >20% of a document's sections are marked with LOW confidence, the DAA must stop and request human intervention.

## 4. Incremental Updates vs. Rewrites
- **Rule**: Updates must be incremental. Do not rewrite existing sections unless they are explicitly proven incorrect.
- **Override**: Entire file rewrites are only permitted if `DOC_REWRITE_APPROVED=true` is set in the environment.

## 5. ADR (Architecture Decision Records)
- ADRs are append-only.
- If a decision is superseded, create a new ADR and link to the old one marking it "Superseded".

## 6. Automation and Kill-Switch
- Auto-rebuilding of `llms-full.txt` via CI is enabled by default.
- Auto-committing changes to `llms-full.txt` is controlled by `DOC_AUTOMATION_ENABLED`.
- **Emergency Kill-Switch**: Setting `DOC_AUTOMATION_ENABLED=false` disables all automated commits.

---
**Source**: standard  
**Locator**: docs/DOC_POLICY.md  
**Confidence**: HIGH  
**Last Verified**: 2025-05-22
---

## File: docs/SECURITY.md
# Security Posture

## Threat Model
The application operates as a Client-Side Progressive Web App (PWA).

### Primary Threat Actors
1. **Malicious Inputs**: Prompt injection targeting Gemini models.
2. **Local Data Theft**: Unauthorized access to browser IndexedDB storage.
3. **API Exfiltration**: Interception of Gemini API traffic.

## Prompt Injection
- **Status**: VERIFIED
- **Locator**: services/geminiService.ts
- **Details**: No client-side sanitation or escaping is performed on user input before passing to Gemini models. The system relies exclusively on Gemini's internal safety filters and the provided `systemInstruction` guardrails.
- **Confidence**: HIGH
- **Last Verified**: 2026-01-09

## NHI (Non-Human Identity)
- **Status**: VERIFIED
- **Locator**: vite.config.ts, services/geminiService.ts
- **Details**: `GEMINI_API_KEY` is injected at build-time using Vite's `define` configuration. As this is a client-side PWA, the API key is theoretically extractable from the minified production bundles.
- **Confidence**: HIGH
- **Last Verified**: 2026-01-09

## Egress
Egress is restricted to `googleapis.com` for model interaction and `esm.sh` / `gstatic.com` for library loading.

## Patch Policy
Third-party dependencies are loaded via `esm.sh` with specific version tags (e.g., `@google/genai@1.34.0`).

## Incident Response
In case of suspected API key compromise, rotate the key in the execution environment immediately.

## Kill Switch
Documentation automation kill-switch: `DOC_AUTOMATION_ENABLED=false`.

---
**Source**: code|config  
**Locator**: services/geminiService.ts, index.html  
**Confidence**: MEDIUM  
**Last Verified**: 2025-05-22
---

## File: docs/ARCHITECTURE.md
# Architecture Overview

## Overview
AutoArchitect is a client-side React PWA designed for synthesizing automation workflows. It follows a decoupled "Synthesis-Audit-Deploy" pattern.

## Modules
- **Generator**: Synthesizes blueprints from user descriptions using Gemini 3 Pro.
- **Audit**: Security and ROI analysis via Gemini 3 Pro.
- **Sandbox**: Logical trace simulation.
- **Vault**: Persistent storage using IndexedDB (Dexie).
- **Terminal**: CLI bridge to GenAI SDK.

## Data Flow
1. User Input -> `AutomationGeneratorView`.
2. `geminiService` -> Gemini API (SSL).
3. Blueprint Response -> UI state + `Dexie` (Local DB).
4. Vault Export -> Local JSON download.

## Orchestration Pattern
- **Status**: VERIFIED
- **Locator**: services/geminiService.ts
- **Details**: Direct frontend-to-API orchestration using `@google/genai` (Google GenAI SDK). All orchestration logic (prompt sequencing, model selection, response parsing) is managed in the client-side `geminiService`.
- **Confidence**: HIGH
- **Last Verified**: 2026-01-09

## Trust Boundaries
- **Client/Browser**: Trusted (User controlled).
- **Gemini API**: Semi-trusted (Privacy boundaries apply).
- **Public CDN (esm.sh)**: Semi-trusted (integrity checked via versioning).

## Failure Modes
- **Offline**: Functional for vault/history, synthesis requires reconnect.
- **API Quota**: Handled by exponential backoff in `geminiService`.

---
**Source**: code|ARCHITECTURE.md (root)  
**Locator**: App.tsx, services/geminiService.ts, ARCHITECTURE.md  
**Confidence**: HIGH  
**Last Verified**: 2025-05-22
---

## File: docs/FRAMEWORK.md
# Framework and Implementation Stack

## Frontend Stack
- **Library**: React 18 (esm.sh)
- **Styling**: Tailwind CSS (CDN)
- **Icons**: Lucide-React
- **Database**: Dexie.js (IndexedDB)
- **PWA**: Service Worker (`sw.js`)

## LLM Models and Roles
- **Gemini 3 Pro Preview**: Primary architect for complex logic and auditing.
- **Gemini 3 Flash Preview**: Documentation and manual synthesis.
- **Gemini 2.5 Flash Native Audio**: Live architect sessions.
- **Gemini 2.5 Flash TTS**: Procedure manual audio synthesis.

## Tooling Boundaries
- No backend server.
- No third-party analytics (verified in `index.html`).
- State management via React `useState` and `Dexie`.

## CI/CD Hooks
- **Documentation Authority**: Validates and builds documentation context.
- **Locator**: `.github/workflows/docs-authority.yml`.

---
**Source**: code|config  
**Locator**: index.html, services/geminiService.ts, package.json (conceptually)  
**Confidence**: HIGH  
**Last Verified**: 2025-05-22
---

## File: docs/CHANGELOG.md
# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.1.0] - 2025-05-22
### Added
- Repository baseline established.
- Documentation Governance Policy (DOC_POLICY).
- Documentation Authority Agent (DAA) system prompt.
- `llms-full.txt` build automation script.
- GitHub Actions CI for documentation validation.
- Minimal shells for ARCHITECTURE, SECURITY, and FRAMEWORK documentation.

---
**Source**: git  
**Locator**: repository history  
**Confidence**: HIGH  
**Last Verified**: 2025-05-22
---

## File: docs/AGENTS_DOCUMENTATION_AUTHORITY.md
# Documentation Authority Agent (DAA) System Prompt

## Role
You are the Documentation Authority Agent (DAA) for this repository. Your primary responsibility is maintaining the integrity, accuracy, and provenance of the documentation set.

## Scope of Write Access
You are permitted to modify:
- `docs/**`
- `ADR/**`
- `llms.txt`
- `llms-full.txt`
- `CHANGELOG.md`

## Primary Constraints
1. **Incremental Updates Only**: Never perform a wholesale rewrite of a file unless `DOC_REWRITE_APPROVED=true`.
2. **Evidence-Bound Writing**: Every statement must be supported by code, configuration, or git history.
3. **Provenance Required**: Every changed or new section must include a provenance footer (Source, Locator, Confidence, Last Verified).
4. **ADR Supremacy**: Architecture decisions documented in `ADR/` take precedence over implementation details found in code if they conflict, until implementation is verified as the new intent.
5. **No Placeholders**: Never use "TODO" or "PLACEHOLDER". Use "UNKNOWN" with a clear request for human review.

## Output Format
Your output must be raw Markdown patches or complete file contents if creating new files. Do not provide conversational commentary unless specifically asked for a summary.

## Stop Conditions
- Stop if requested info is missing and cannot be logically inferred from evidence.
- Stop if confidence in the update is LOW and requires human confirmation.

---
**Source**: standard  
**Locator**: docs/AGENTS_DOCUMENTATION_AUTHORITY.md  
**Confidence**: HIGH  
**Last Verified**: 2025-05-22
---

